var sympId="";$(function(){var isFindADoctor=$("[id$='hidIsCurrentTab']").val();switch(isFindADoctor){case "TabOrgan":$("[id$='aTab2']").attr("aria-selected","false");$("[id$='aTab2']").removeClass("active");$("[id$='tab-2']").removeClass("show active");$("[id$='aTab1']").attr("aria-selected","true");$("[id$='aTab1']").addClass("active");$("[id$='tab-1']").addClass("show active");break;case "TabFindADoctor":$("[id$='aTab1']").attr("aria-selected","false").removeClass("active");$("[id$='tab-1']").removeClass("show active");$("[id$='aTab2']").attr("aria-selected","true").addClass("active");$("[id$='tab-2']").addClass("show active");break;default:}
setTimeout(function(){steperControl();venderScript();venderStepper();},500);var isTab=$("[id$='hidIsCurrentTab']").val();if(isTab==="TabOrgan"){var hidMaleUpperCodeName=$('[id$="hidMaleUpperRegionCodeName"]').val();getOrgansByAPI(hidMaleUpperCodeName);bindRegionBody();}
setTimeout(function(){$("[id$='aTab1']").on("click",function(){var tab1IsActive=$("[id$='aTab1']").hasClass("active");if(!tab1IsActive){var hidMaleUpperCodeName=$('[id$="hidMaleUpperRegionCodeName"]').val();getOrgansByAPI(hidMaleUpperCodeName);bindRegionBody();}
ResetScreenControls("ActiveWhenClickTabEventEvent");});},500);});function bindEvent(){$('.body').click(function(){var isActive=$(".symptome-list").hasClass("active");if(isActive){$(".symptome-list").removeClass("active");}
$("[id$='renderDoctor']").html("");});setTimeout(function(){$("[id$='lblBackM']").on("click",function(){ResetScreenControls("ActiveWhenBackEvent");});},500);$('.symptome-item').each(function(i){$(this).off();$(this).on("click",function(){let id=$(this).data('sumptome');$('.symptome-item.active').removeClass('active');$(this).addClass('active');$('.symptome-list.active').removeClass('active');$(`.symptome-list[data-list="${id}"]`).addClass('active');$(".nano").nanoScroller();var symp_id=$(this).attr("data-sumptome");$("#render_selected_organ").text($(this).attr("title"));if(symp_id!=null&&symp_id!=undefined&&symp_id!=""){getSymptopByAPI(symp_id);}
FilterDisplayControls("none");NextStepControl("ToSymtoms");});});$("#select_body").on("click",function(){FilterDisplayControls("none");});}
function ResetScreenControls(event){switch(event){case "ActiveWhenClickTabEventEvent":$("[id$='stepper-step-1']").removeClass("active show in");$("[id$='stepper-step-2']").removeClass("active show in");$("[id$='stepper-step-3']").removeClass("active show in");$("[id$='stepper-step-4']").removeClass("active show in");$("[id$='presentation_step_1']").removeClass("completed active disabled");$("[id$='presentation_step_2']").removeClass("completed active disabled");$("[id$='presentation_step_3']").removeClass("completed active disabled");$("[id$='presentation_step_4']").removeClass("completed active disabled");$(".stepper .nav-tabs>li#presentation_step_1:nth-of-type(1)").removeClass("line-color");$(".stepper .nav-tabs>li#presentation_step_2:nth-of-type(2)").removeClass("line-color");$(".stepper .nav-tabs>li#presentation_step_3:nth-of-type(3)").removeClass("line-color");$("#renderDoctor").html("");$("[id$='stepper-step-1']").addClass("active show in");$("[id$='presentation_step_1']").addClass("active");LabelStepControls("Regions");ResetScreenControls("ActiveWhenBackEvent");break;case "ActiveWhenBackEvent":$("[id$='Male_Front_Upper']").removeClass("active");$("[id$='Male_Front_Mid']").removeClass("active");$("[id$='Male_Front_Lower']").removeClass("active");$("[id$='Female_Front_Upper']").removeClass("active");$("[id$='Female_Front_Mid']").removeClass("active");$("[id$='Female_Front_Lower']").removeClass("active");$("[id$='Pediatric_Front_Upper']").removeClass("active");$("[id$='Pediatric_Front_Mid']").removeClass("active");$("[id$='Pediatric_Front_Lower']").removeClass("active");var vw=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)
if(vw>=1024){$("[id$='Male_Front_Upper']").click();$("[id$='Male_Front_Upper']").addClass("active");}
$("[id$='Male_Front_Upper']").addClass("active");break;default:}}
function getDoctorsByAPI(symp_code,symp_id,filter_date,filter_time){var url=`/bhcustomapi/organsearch/GetDoctors?symp_code=symptom_${symp_code.trim().toLowerCase()}&days=${filter_date}&times=${filter_time}&language=${$("[id$='hidLanguage']").val()}`;getDoctorByAPI(url,symp_id);}
function getOrgansByAPI(region_id){var url=`/bhcustomapi/organsearch/GetOrgans?region_id=${region_id}&language=${$("[id$='hidLanguage']").val()}`;getDataByAPI(url,"GetOrgansService","");}
function getSymptopByAPI(organ_id){var url=`/bhcustomapi/organsearch/GetSymptoms?organ_id=${organ_id}&language=${$("[id$='hidLanguage']").val()}`;getDataByAPI(url,"GetSymptomsService",organ_id);}
function getDoctorScheduleByAPI(mdCode){var url=`/bhcustomapi/organsearch/getdoctorschedule?mdCode=${mdCode}&language=${$("[id$='hidLanguage']").val()}`;getDoctorSchedule(url,mdCode);}
function getDataByAPI(url,service,organ_id){$('#loading').modal('show');$.ajax({url:url,method:"GET",format:"json"}).done(function(data){if(data!=null&&data!=undefined){switch(service){case "GetOrgansService":setTimeout(function(){$("#loading").modal('hide');},400);renderOrgans(data);bindEvent();break;case "GetSymptomsService":setTimeout(function(){$("#loading").modal('hide');},400);renderSymptoms(data,organ_id);break;default:}}});}
function getDoctorByAPI(url,symp_id){$('#loading').modal('show');$.ajax({url:`${url}`,method:"GET",format:"json"}).done(function(data){if(data!=null&&data!=undefined){renderDoctor(data,symp_id);}}).always(function(){setTimeout(function(){$("#loading").modal('hide');},500);});}
function getDoctorSchedule(url,mdCode){$('#loading').modal('show');$.ajax({url:`${url}`,method:"GET",format:"json"}).done(function(data){if(data!=null&&data!=undefined){renderDoctorSchedule(data,mdCode);}}).always(function(){setTimeout(function(){$("#loading").modal('hide');},500);});}
function renderOrgans(affecteds){$.each(affecteds,function(key,affected){if(affected.Content!=null&&affected.Content!=undefined&&affected.Content!=""){if(affected.Region!=null&&affected.Region!=undefined&&affected.Region!=""){switch(affected.Region){case "region_male_upper":$("[id$='render_affected_male_front_upper']").html(affected.Content);$("[id$='render_affected_male_front_upper_M']").html(affected.Content);break;case "region_male_center":$("[id$='render_affected_male_front_mid']").html(affected.Content);$("[id$='render_affected_male_front_center_M']").html(affected.Content);break;case "region_male_lower":$("[id$='render_affected_male_front_lower']").html(affected.Content);$("[id$='render_affected_male_front_lower_M']").html(affected.Content);break;case "region_female_upper":$("[id$='render_affected_female_front_upper']").html(affected.Content);$("[id$='render_affected_female_front_upper_M']").html(affected.Content);break;case "region_female_center":$("[id$='render_affected_female_front_mid']").html(affected.Content);$("[id$='render_affected_female_front_center_M']").html(affected.Content);break;case "region_female_lower":$("[id$='render_affected_female_front_lower']").html(affected.Content);$("[id$='render_affected_female_front_lower_M']").html(affected.Content);break;case "region_child_upper":$("[id$='render_affected_pediatric_front_upper']").html(affected.Content);$("[id$='render_affected_pediatric_front_upper_M']").html(affected.Content);break;case "region_child_center":$("[id$='render_affected_pediatric_front_mid']").html(affected.Content);$("[id$='render_affected_pediatric_front_center_M']").html(affected.Content);break;case "region_child_lower":$("[id$='render_affected_pediatric_front_lower']").html(affected.Content);$("[id$='render_affected_pediatric_front_lower_M']").html(affected.Content);break;default:}
$(".nano").nanoScroller();}}});}
function renderSymptoms(symptoms,organ_id){$("[id$='render_symptom']").html("");$("[id$='render_symptom_M']").html("");for(var i=0;i<symptoms.length;i++){$("[id$='render_symptom']").append(symptoms[i].Content);$("[id$='render_symptom_M']").append(symptoms[i].Content);}
$(".symptome-list").addClass('active');$(".nano").nanoScroller();$('.symptome-list li').off();$('.symptome-list li').on("click",function(){$('.symptome-list li.active').removeClass('active');$(this).addClass('active');var symp_code=$(this).attr("sympcode");var symp_id=$(this).attr("data-sick");sessionStorage.removeItem("symp_code");sessionStorage.setItem("symp_code",symp_code);sessionStorage.removeItem("symp_id");sessionStorage.setItem("symp_id",symp_id);getDoctorsByAPI(symp_code,symp_id,"","");$("button[data-id=dateFilter] .filter-option-inner-inner").addClass("dateFilterIcon placeholder-bold");$("button[data-id=timeFilter] .filter-option-inner-inner").addClass("timeFilterIcon placeholder-bold");$("button[data-id=dateFilter_M] .filter-option-inner-inner").addClass("dateFilterIcon placeholder-bold");$("button[data-id=timeFilter_M] .filter-option-inner-inner").addClass("timeFilterIcon placeholder-bold");var lblSearchBtn=$("[id$='hidlblBtnFilterOptions']").val();$("#btnFilterDoctor").text(lblSearchBtn);$("#btnFilterDoctor_M").text(lblSearchBtn);FilterDisplayControls("show");NextStepControl("ToDoctors");});}
function FilterDisplayControls(isDisplay){$('.selectpicker').selectpicker('deselectAll');$('.selectpicker').selectpicker('val',"");switch(isDisplay){case "show":$("#filterOption").show();$("#filterOption_M").show();break;case "none":$("#filterOption").hide();$("#filterOption_M").hide();break;default:}}
function renderDoctor(doctors,sym_id){try{$("#renderDoctor").html("");$.each(doctors,function(key,doctor){$("#renderDoctor").append(doctor.Content);});}catch(e){}}
function renderDoctorSchedule(data,mdCode){try{$(`#table_${mdCode} tbody`).each(function(index){if($.trim($(this).html()).length==0){$('#loading').modal('show');$(this).append(data.Content);}});}catch(e){console.log(e);}}
function steperControl(){$(".next-step-1").on("click",function(){$("#stepper-step-1").removeClass("active show in");$("#stepper-step-2").addClass("active show in");$("#presentation_step_2").removeClass("disabled").addClass("active completed");LabelStepControls("Organs");});$(".next-step-2").on("click",function(){$("#stepper-step-2").removeClass("active show in");$("#stepper-step-3").addClass("active show in");$("#presentation_step_3").removeClass("disabled").addClass("active completed");$('[id$="lblRegionsStep"]').removeClass("lblStep-active");$('[id$="lblOrgansStep"]').addClass("lblStep-active");LabelStepControls("Symtoms");});$(".next-step-3").on("click",function(){$("#stepper-step-3").removeClass("active show in");$("#stepper-step-4").addClass("active show in");$("#presentation_step_4").removeClass("disabled").addClass("active completed");LabelStepControls("Doctors");});$(".prev-step-2").on("click",function(){$("#stepper-step-2").removeClass("active show in");$("#stepper-step-1").addClass("active show in");$("#presentation_step_1").removeClass("disabled").addClass("active completed");$("#presentation_step_2").removeClass("active completed").addClass("disabled");$(".stepper .nav-tabs>li#presentation_step_1:nth-of-type(1)").removeClass("line-color");LabelStepControls("Regions");});$(".prev-step-3").on("click",function(){$("#stepper-step-3").removeClass("active show in");$("#stepper-step-2").addClass("active show in");$("#presentation_step_3").removeClass("active completed").addClass("disabled");$("#presentation_step_2").removeClass("disabled").addClass("active completed");$(".stepper .nav-tabs>li#presentation_step_2:nth-of-type(2)").removeClass("line-color");LabelStepControls("Organs");});}
function LabelStepControls(step){$('[id$="lblRegionsStep"]').removeClass("lblStep-active");$('[id$="lblOrgansStep"]').removeClass("lblStep-active");$('[id$="lblSymtomsStep"]').removeClass("lblStep-active");$('[id$="lblDoctorsStep"]').removeClass("lblStep-active");switch(step){case "Regions":$('[id$="lblRegionsStep"]').addClass("lblStep-active");break;case "Organs":$('[id$="lblOrgansStep"]').addClass("lblStep-active");$(".stepper .nav-tabs>li#presentation_step_1:nth-of-type(1)").addClass("line-color");$(".stepper .nav-tabs > li#presentation_step_1.active:last-child .round-tab").css("background","#34bc9b");break;case "Symtoms":$('[id$="lblSymtomsStep"]').addClass("lblStep-active");$(".stepper .nav-tabs>li#presentation_step_2:nth-of-type(2)").addClass("line-color");break;case "Doctors":$('[id$="lblDoctorsStep"]').addClass("lblStep-active");$(".stepper .nav-tabs>li#presentation_step_3:nth-of-type(3)").addClass("line-color");break;default:}}
function resetAllRender(){var listTempLength=$(".renderTemplateOrgan").children().length;var listTempLength_M=$(".renderTemplateOrgan_M").children().length;if(listTempLength>=0){for(var i=0;i<listTempLength;i++){var renders_id=$(".renderTemplateOrgan").children(`:eq(${i})`).attr("id");$(`[id$=${renders_id}],[id$=render_symptom]`).html("");}}
if(listTempLength_M>=0){for(var i=0;i<listTempLength;i++){var renders_id_M=$(".renderTemplateOrgan_M").children(`:eq(${i})`).attr("id");$(`[id$=${renders_id_M}],[id$=render_symptom_M]`).html("");}}}
function NextStepControl(step){switch(step){case "ToOrgans":$('[id$="lblNextStep"]').click();break;case "ToSymtoms":$('[id$="lblNextStepM"]').click();break;case "ToDoctors":$('[id$="lblNextStepIIM"]').click();break;default:}}
function bindRegionBody(){$('[id$="Male_Front_Shading"]:eq(0)').on("click",function(){resetAllRender();});$('[id$="Male_Front_Shading"]:eq(1)').on("click",function(){resetAllRender();});$('[id$="Male_Front_Upper"]').on("click",function(){var hidMaleUpperCodeName=$('[id$="hidMaleUpperRegionCodeName"]').val();getOrgansByAPI(hidMaleUpperCodeName);NextStepControl("ToOrgans");});$('[id$="Male_Front_Mid"]:eq(0),[id$="Male_Front_Mid"]:eq(1)').on("click",function(){var hidMaleCenterCodeName=$('[id$="hidMaleCenterRegionCodeName"]').val();getOrgansByAPI(hidMaleCenterCodeName);NextStepControl("ToOrgans");});$('[id$="Male_Front_Lower"]').on("click",function(){var hidMaleLowerCodeName=$('[id$="hidMaleLowerRegionCodeName"]').val();getOrgansByAPI(hidMaleLowerCodeName);NextStepControl("ToOrgans");});$('[id$="Female_Front_Upper"]').on("click",function(){var hidFemaleUpperCodeName=$('[id$="hidFemaleUpperRegionCodeName"]').val();getOrgansByAPI(hidFemaleUpperCodeName);NextStepControl("ToOrgans");});$('[id$="Female_Front_Mid"]').on("click",function(){var hidFemaleCenterCodeName=$('[id$="hidFemaleCenterRegionCodeName"]').val();getOrgansByAPI(hidFemaleCenterCodeName);NextStepControl("ToOrgans");});$('[id$="Female_Front_Lower"]').on("click",function(){var hidFemaleLowerCodeName=$('[id$="hidFemaleLowerRegionCodeName"]').val();getOrgansByAPI(hidFemaleLowerCodeName);NextStepControl("ToOrgans");});$('[id$="Pediatric_Front_Upper"]').on("click",function(){var hidChildUpperCodeName=$('[id$="hidChildUpperRegionCodeName"]').val();getOrgansByAPI(hidChildUpperCodeName);NextStepControl("ToOrgans");});$('[id$="Pediatric_Front_Mid"]').on("click",function(){var hidChildCenterCodeName=$('[id$="hidChildCenterRegionCodeName"]').val();getOrgansByAPI(hidChildCenterCodeName);NextStepControl("ToOrgans");});$('[id$="Pediatric_Front_Lower"]').on("click",function(){var hidChildLowerCodeName=$('[id$="hidChildLowerRegionCodeName"]').val();getOrgansByAPI(hidChildLowerCodeName);NextStepControl("ToOrgans");});}
function venderScript(){$('.body').click(function(){let id=$(this).attr('id'),content=$(`.symptome-list-block[data-tab="${id}"]`);$('.body.active').removeClass('active');$('.symptome-list-block.active').removeClass('active')
$(this).addClass('active');content.addClass('active');$(".nano").nanoScroller();});setTimeout(function(){$('.symptome-item').each(function(i){$(this).on("click",function(){let id=$(this).data('sumptome');$('.symptome-item.active').removeClass('active');$(this).addClass('active');$('.symptome-list.active').removeClass('active');$(`.symptome-list[data-list="${id}"]`).addClass('active');$(".nano").nanoScroller();});});},500);$('#byAZ').click(function(){$('.byAZ').addClass('active');$('.choose-search').css('display','none');$('.page-banner').removeClass('d-none');$('.quickaccess').removeClass('d-none');});$('#bySymptom').click(function(){$('.bySymptom').addClass('active');$('.choose-search').css('display','none');});setTimeout(function(){$('.symptome-list li').click(function(){$('.symptome-list li.active').removeClass('active');$(this).addClass('active');var bodyAttr=$('.body.active').attr('id');var sumptomeId=$('.symptome-item.active').data('sumptome');var sickId=$('.symptome-list li.active').data('sick');$(".nano").nanoScroller();$('.doctor-block').each(function(id,value){var Doctor=value;var bodyarr=$(value).data('bodyid').toString().split(',');var symptomeArr=$(value).data('itemid').toString().split(',');var sickId=$(value).data('sickid').toString().split(',');if($.inArray(bodyAttr,bodyarr)===0&&$.inArray(sumptomeId,symptomeArr)&&$.inArray(sickId,sickId)){$(Doctor).addClass('active')}else{$(Doctor).removeClass('active')}})});},500);$(".nano").nanoScroller();}
function venderStepper(){var $progressWizard=$('.stepper'),$tab_active,$tab_prev,$tab_next,$btn_prev=$progressWizard.find('.prev-step'),$btn_next=$progressWizard.find('.next-step'),$tab_toggle=$progressWizard.find('[data-toggle="tab"]'),$tooltips=$progressWizard.find('[data-toggle="tab"][title]');$tooltips.tooltip();$tab_toggle.on('show.bs.tab',function(e){var $target=$(e.target);if(!$target.parent().hasClass('active, disabled')){$target.parent().prev().addClass('completed');}
if($target.parent().hasClass('disabled')){return false;}});$('.next-step').on('click',function(){setTimeout(function(){$(".nano").nanoScroller();},300)});$('.prev-step').on('click',function(){setTimeout(function(){$(".nano").nanoScroller();},300)});}
function triggerClick(elem){$(elem).click();}
function BindLastEvents(){setTimeout(function(){$("#btnFilterDoctor_M").on("click",function(){var symp_code=sessionStorage.getItem("symp_code");var symp_id=sessionStorage.getItem("symp_id");var filter_date=$("#dateFilter_M").val().length>0?$("#dateFilter_M").val().toString():"";var filter_time=$("#timeFilter_M").val().length>0?$("#timeFilter_M").val().toString():"";getDoctorsByAPI(symp_code,symp_id,filter_date,filter_time);});},500);setTimeout(function(){$("#btnFilterDoctor").on("click",function(){var symp_code=sessionStorage.getItem("symp_code");var symp_id=sessionStorage.getItem("symp_id");var filter_date=$("#dateFilter").val().length>0?$("#dateFilter").val().toString():"";var filter_time=$("#timeFilter").val().length>0?$("#timeFilter").val().toString():"";getDoctorsByAPI(symp_code,symp_id,filter_date,filter_time);});},500);}
$(document).ready(function(){BindLastEvents();});